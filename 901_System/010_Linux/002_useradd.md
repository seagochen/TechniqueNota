- [0. 创建用户](#0-创建用户)
- [1. 确认主目录已经正确设置：](#1-确认主目录已经正确设置)
- [2. 修改用户主目录（如果需要）：](#2-修改用户主目录如果需要)
- [3. 切换到 `user` 用户并验证：](#3-切换到-user-用户并验证)


### 0. 创建用户

在 Ubuntu 中，你可以通过以下步骤创建一个名为 `user` 的用户，并给予它 `sudo` 权限：

1. 打开终端，并输入以下命令来创建一个新用户：
   ```bash
   sudo adduser user
   ```
   你将会被提示设置该用户的密码以及提供一些其他信息（可以直接按回车跳过）。

2. 创建完用户后，你需要将该用户添加到 `sudo` 组，使其可以使用 `sudo` 权限：
   ```bash
   sudo usermod -aG sudo user
   ```

3. 接下来，你可以通过以下命令切换到新用户 `user` 并测试：
   ```bash
   su - user
   ```

4. 确认 `sudo` 权限是否生效，可以尝试执行以下命令：
   ```bash
   sudo whoami
   ```
   如果显示 `root`，说明新用户已经拥有了 `sudo` 权限。

这样，`user` 就可以正常使用 `sudo` 权限了。


### 1. 确认主目录已经正确设置：
用户创建时，通常默认会创建一个对应的主目录 `/home/user`。你可以通过以下命令来查看用户的主目录是否已经正确设置：

```bash
grep user /etc/passwd
```

这个命令会显示类似于以下的输出：
```
user:x:1001:1001::/home/user:/bin/bash
```
其中，`/home/user` 就是该用户的主目录。

### 2. 修改用户主目录（如果需要）：
如果你想修改现有用户的主目录（例如当前用户的主目录不在 `/home/user`），你可以使用 `usermod` 命令来指定新的主目录。使用以下命令将用户 `user` 的主目录改为 `/home/user`，并且移动原有文件（如果有）到新的主目录：

```bash
sudo usermod -d /home/user -m user
```

解释：
- `-d /home/user`：指定新的主目录。
- `-m`：如果目标目录不存在，自动创建并移动现有文件。

这样就确保了 `user` 的主目录设置为 `/home/user`。

### 3. 切换到 `user` 用户并验证：
你可以切换到 `user` 用户并确认主目录是否已正确设置：

```bash
su - user
```

然后输入以下命令，查看当前所在的主目录：

```bash
pwd
```

它应该会显示 `/home/user`，表示已经成功将主目录设置为此地址。

这样，用户的默认文件夹地址就会指向 `/home/user`。